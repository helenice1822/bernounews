import {Redis} from '@upstash/redis';const redis=Redis.fromEnv();export default async function h(req,res){const {id}=req.query;if(req.method==='GET'){const it=await redis.get('news:'+id);if(!it)return res.status(404).end();return res.status(200).json({item:it});}const ok=(req.headers['x-admin-password']||'')===(process.env.ADMIN_PASSWORD||'helena2025');if(!ok)return res.status(401).end();if(req.method==='PUT'){const cur=await redis.get('news:'+id);const next={...cur,...req.body,id};await redis.set('news:'+id,next);return res.status(200).json({item:next});}if(req.method==='DELETE'){await redis.del('news:'+id);await redis.zrem('news:ids',id);return res.status(204).end();}res.status(405).end()}